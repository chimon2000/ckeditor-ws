{"remainingRequest":"/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/docz-core/node_modules/thread-loader/dist/cjs.js??ref--11-1!/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/docz-core/node_modules/babel-loader/lib/index.js??ref--11-2!/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/source-map-loader/index.js!/Users/redge/Projects/sandbox/ckeditor-ws/modules/editor/src/contexts/Editor.tsx","dependencies":[{"path":"/Users/redge/Projects/sandbox/ckeditor-ws/modules/editor/src/contexts/Editor.tsx","mtime":1560871234018},{"path":"/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/docz-core/node_modules/cache-loader/dist/cjs.js","mtime":1559065432294},{"path":"/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/docz-core/node_modules/thread-loader/dist/cjs.js","mtime":1559065433126},{"path":"/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1559065432179},{"path":"/Users/redge/Projects/sandbox/ckeditor-ws/node_modules/source-map-loader/index.js","mtime":1559065433121}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9yZWRnZS9Qcm9qZWN0cy9zYW5kYm94L2NrZWRpdG9yLXdzL25vZGVfbW9kdWxlcy9iYWJlbC1wcmVzZXQtcmVhY3QtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKdmFyIF9qc3hGaWxlTmFtZSA9ICIvVXNlcnMvcmVkZ2UvUHJvamVjdHMvc2FuZGJveC9ja2VkaXRvci13cy9tb2R1bGVzL2VkaXRvci9zcmMvY29udGV4dHMvRWRpdG9yLnRzeCI7CgooZnVuY3Rpb24gKCkgewogIHZhciBlbnRlck1vZHVsZSA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmVudGVyTW9kdWxlOwogIGVudGVyTW9kdWxlICYmIGVudGVyTW9kdWxlKG1vZHVsZSk7Cn0pKCk7Cgp2YXIgX19zaWduYXR1cmVfXyA9IHR5cGVvZiByZWFjdEhvdExvYWRlckdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyByZWFjdEhvdExvYWRlckdsb2JhbFsiZGVmYXVsdCJdLnNpZ25hdHVyZSA6IGZ1bmN0aW9uIChhKSB7CiAgcmV0dXJuIGE7Cn07CgppbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNvbnRleHQsIGNyZWF0ZUNvbnRleHQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JzsKZXhwb3J0IGZ1bmN0aW9uIEVkaXRvclByb3ZpZGVyKHByb3BzKSB7CiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKCksCiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLAogICAgICBjdXJyZW50RWRpdG9yID0gX3VzZVN0YXRlMlswXSwKICAgICAgc2V0Q3VycmVudEVkaXRvciA9IF91c2VTdGF0ZTJbMV07CgogIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoe30pLAogICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksCiAgICAgIGVuYWJsZWRDb21tYW5kcyA9IF91c2VTdGF0ZTRbMF0sCiAgICAgIHNldEVuYWJsZWRDb21tYW5kcyA9IF91c2VTdGF0ZTRbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICB2YXIgY29tbWFuZEhhbmRsZXJzID0gW107CgogICAgaWYgKGN1cnJlbnRFZGl0b3IpIHsKICAgICAgY29tbWFuZHMuZm9yRWFjaChmdW5jdGlvbiAoY29tbWFuZCkgewogICAgICAgIGNvbW1hbmRIYW5kbGVycy5wdXNoKHsKICAgICAgICAgIGNvbW1hbmQ6IGNvbW1hbmQsCiAgICAgICAgICBoYW5kbGVyOiBoYW5kbGVDb21tYW5kQ2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGN1cnJlbnRFZGl0b3IuY29tbWFuZHMuZ2V0KGNvbW1hbmQpLm9uKCdjaGFuZ2UnLCBoYW5kbGVDb21tYW5kQ2hhbmdlZCk7CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjdXJyZW50RWRpdG9yKSB7CiAgICAgICAgY29tbWFuZEhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICAgIHZhciBjb21tYW5kID0gX3JlZi5jb21tYW5kLAogICAgICAgICAgICAgIGhhbmRsZXIgPSBfcmVmLmhhbmRsZXI7CiAgICAgICAgICByZXR1cm4gY3VycmVudEVkaXRvci5jb21tYW5kcy5nZXQoY29tbWFuZCkub2ZmKGhhbmRsZXIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogIH0sIFtjdXJyZW50RWRpdG9yXSk7CgogIHZhciBoYW5kbGVDb21tYW5kQ2hhbmdlZCA9IGZ1bmN0aW9uIGhhbmRsZUNvbW1hbmRDaGFuZ2VkKCkgewogICAgdmFyIGVuYWJsZWRDb21tYW5kcyA9IHt9OwoKICAgIGlmIChjdXJyZW50RWRpdG9yKSB7CiAgICAgIGNvbW1hbmRzLmZvckVhY2goZnVuY3Rpb24gKGNvbW1hbmQpIHsKICAgICAgICByZXR1cm4gZW5hYmxlZENvbW1hbmRzW2NvbW1hbmRdID0gY3VycmVudEVkaXRvci5jb21tYW5kcy5nZXQoY29tbWFuZCkudmFsdWU7CiAgICAgIH0pOwogICAgfQoKICAgIHNldEVuYWJsZWRDb21tYW5kcyhlbmFibGVkQ29tbWFuZHMpOwogIH07CgogIGZ1bmN0aW9uIGV4ZWN1dGVDb21tYW5kKGNvbW1hbmQsIG9wdGlvbnMpIHsKICAgIGlmICghY3VycmVudEVkaXRvcikgcmV0dXJuOwogICAgY29uc29sZS5sb2coY29tbWFuZCk7CiAgICBjdXJyZW50RWRpdG9yLmV4ZWN1dGUoY29tbWFuZCwgb3B0aW9ucyk7CiAgICBjdXJyZW50RWRpdG9yLmVkaXRpbmcudmlldy5mb2N1cygpOwogIH0KCiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdG9yQ29udGV4dC5Qcm92aWRlciwgewogICAgdmFsdWU6IHsKICAgICAgY3VycmVudEVkaXRvcjogY3VycmVudEVkaXRvciwKICAgICAgc2V0Q3VycmVudEVkaXRvcjogZnVuY3Rpb24gKF9zZXRDdXJyZW50RWRpdG9yKSB7CiAgICAgICAgZnVuY3Rpb24gc2V0Q3VycmVudEVkaXRvcihfeCkgewogICAgICAgICAgcmV0dXJuIF9zZXRDdXJyZW50RWRpdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICBzZXRDdXJyZW50RWRpdG9yLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF9zZXRDdXJyZW50RWRpdG9yLnRvU3RyaW5nKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIHNldEN1cnJlbnRFZGl0b3I7CiAgICAgIH0oZnVuY3Rpb24gKGVkaXRvcikgewogICAgICAgIHJldHVybiBzZXRDdXJyZW50RWRpdG9yKGVkaXRvcik7CiAgICAgIH0pLAogICAgICBleGVjdXRlQ29tbWFuZDogZXhlY3V0ZUNvbW1hbmQsCiAgICAgIGVuYWJsZWRDb21tYW5kczogZW5hYmxlZENvbW1hbmRzCiAgICB9LAogICAgX19zb3VyY2U6IHsKICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogNDUKICAgIH0sCiAgICBfX3NlbGY6IHRoaXMKICB9LCBwcm9wcy5jaGlsZHJlbik7Cn0KCl9fc2lnbmF0dXJlX18oRWRpdG9yUHJvdmlkZXIsICJ1c2VTdGF0ZXtbY3VycmVudEVkaXRvciwgc2V0Q3VycmVudEVkaXRvcl19XG51c2VTdGF0ZXtbZW5hYmxlZENvbW1hbmRzLCBzZXRFbmFibGVkQ29tbWFuZHNdKHt9KX1cbnVzZUVmZmVjdHt9Iik7CgppZiAodHlwZW9mIEVkaXRvclByb3ZpZGVyICE9PSAndW5kZWZpbmVkJyAmJiBFZGl0b3JQcm92aWRlciAmJiBFZGl0b3JQcm92aWRlciA9PT0gT2JqZWN0KEVkaXRvclByb3ZpZGVyKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKEVkaXRvclByb3ZpZGVyKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFZGl0b3JQcm92aWRlciwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkVkaXRvclByb3ZpZGVyIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvY29udGV4dHMvRWRpdG9yLnRzeCIKICAgIH0KICB9KTsKfQoKZXhwb3J0IGZ1bmN0aW9uIEVkaXRvclN1YnNjcmliZXIocHJvcHMpIHsKICB2YXIgX3VzZUVkaXRvciA9IHVzZUVkaXRvcigpLAogICAgICBjdXJyZW50RWRpdG9yID0gX3VzZUVkaXRvci5jdXJyZW50RWRpdG9yLAogICAgICBzZXRDdXJyZW50RWRpdG9yID0gX3VzZUVkaXRvci5zZXRDdXJyZW50RWRpdG9yLAogICAgICBleGVjdXRlQ29tbWFuZCA9IF91c2VFZGl0b3IuZXhlY3V0ZUNvbW1hbmQsCiAgICAgIGVuYWJsZWRDb21tYW5kcyA9IF91c2VFZGl0b3IuZW5hYmxlZENvbW1hbmRzOwoKICByZXR1cm4gcHJvcHMuY2hpbGRyZW4oewogICAgY3VycmVudEVkaXRvcjogY3VycmVudEVkaXRvciwKICAgIHNldEN1cnJlbnRFZGl0b3I6IHNldEN1cnJlbnRFZGl0b3IsCiAgICBleGVjdXRlQ29tbWFuZDogZXhlY3V0ZUNvbW1hbmQsCiAgICBlbmFibGVkQ29tbWFuZHM6IGVuYWJsZWRDb21tYW5kcwogIH0pOwp9CgpfX3NpZ25hdHVyZV9fKEVkaXRvclN1YnNjcmliZXIsICJ1c2VFZGl0b3J7eyBjdXJyZW50RWRpdG9yLCBzZXRDdXJyZW50RWRpdG9yLCBleGVjdXRlQ29tbWFuZCwgZW5hYmxlZENvbW1hbmRzIH19IiwgZnVuY3Rpb24gKCkgewogIHJldHVybiBbdXNlRWRpdG9yXTsKfSk7CgppZiAodHlwZW9mIEVkaXRvclN1YnNjcmliZXIgIT09ICd1bmRlZmluZWQnICYmIEVkaXRvclN1YnNjcmliZXIgJiYgRWRpdG9yU3Vic2NyaWJlciA9PT0gT2JqZWN0KEVkaXRvclN1YnNjcmliZXIpICYmIE9iamVjdC5pc0V4dGVuc2libGUoRWRpdG9yU3Vic2NyaWJlcikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWRpdG9yU3Vic2NyaWJlciwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkVkaXRvclN1YnNjcmliZXIiLAogICAgICBmaWxlbmFtZTogInNyYy9jb250ZXh0cy9FZGl0b3IudHN4IgogICAgfQogIH0pOwp9CgpleHBvcnQgZnVuY3Rpb24gdXNlRWRpdG9yKCkgewogIHZhciBjb250ZXh0ID0gdXNlQ29udGV4dChFZGl0b3JDb250ZXh0KTsKCiAgaWYgKCFjb250ZXh0KSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoInVzZUVkaXRvciBtdXN0IGJlIHVzZWQgd2l0aGluIGEgRWRpdG9yUHJvdmlkZXIiKTsKICB9CgogIHJldHVybiBjb250ZXh0Owp9CgpfX3NpZ25hdHVyZV9fKHVzZUVkaXRvciwgInVzZUNvbnRleHR7Y29udGV4dH0iKTsKCmlmICh0eXBlb2YgdXNlRWRpdG9yICE9PSAndW5kZWZpbmVkJyAmJiB1c2VFZGl0b3IgJiYgdXNlRWRpdG9yID09PSBPYmplY3QodXNlRWRpdG9yKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHVzZUVkaXRvcikpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodXNlRWRpdG9yLCAnX19maWxlbWV0YScsIHsKICAgIGVudW1lcmFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICB2YWx1ZTogewogICAgICBuYW1lOiAidXNlRWRpdG9yIiwKICAgICAgZmlsZW5hbWU6ICJzcmMvY29udGV4dHMvRWRpdG9yLnRzeCIKICAgIH0KICB9KTsKfQoKdmFyIGNvbW1hbmRzID0gWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnbnVtYmVyZWRMaXN0JywgJ2J1bGxldGVkTGlzdCcsICdhbGlnbm1lbnQnLCAnaGVhZGluZyddOwoKaWYgKHR5cGVvZiBFeGVjdXRlQ29tbWFuZHMgIT09ICd1bmRlZmluZWQnICYmIEV4ZWN1dGVDb21tYW5kcyAmJiBFeGVjdXRlQ29tbWFuZHMgPT09IE9iamVjdChFeGVjdXRlQ29tbWFuZHMpICYmIE9iamVjdC5pc0V4dGVuc2libGUoRXhlY3V0ZUNvbW1hbmRzKSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGVjdXRlQ29tbWFuZHMsICdfX2ZpbGVtZXRhJywgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB7CiAgICAgIG5hbWU6ICJFeGVjdXRlQ29tbWFuZHMiLAogICAgICBmaWxlbmFtZTogInNyYy9jb250ZXh0cy9FZGl0b3IudHN4IgogICAgfQogIH0pOwp9CgppZiAodHlwZW9mIEVkaXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgRWRpdG9yICYmIEVkaXRvciA9PT0gT2JqZWN0KEVkaXRvcikgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShFZGl0b3IpKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVkaXRvciwgJ19fZmlsZW1ldGEnLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHsKICAgICAgbmFtZTogIkVkaXRvciIsCiAgICAgIGZpbGVuYW1lOiAic3JjL2NvbnRleHRzL0VkaXRvci50c3giCiAgICB9CiAgfSk7Cn0KCnZhciBFZGl0b3JDb250ZXh0ID0gY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpOwo7CgooZnVuY3Rpb24gKCkgewogIHZhciByZWFjdEhvdExvYWRlciA9ICh0eXBlb2YgcmVhY3RIb3RMb2FkZXJHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gcmVhY3RIb3RMb2FkZXJHbG9iYWwgOiByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykpLmRlZmF1bHQ7CgogIGlmICghcmVhY3RIb3RMb2FkZXIpIHsKICAgIHJldHVybjsKICB9CgogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKEVkaXRvclByb3ZpZGVyLCAiRWRpdG9yUHJvdmlkZXIiLCAiL1VzZXJzL3JlZGdlL1Byb2plY3RzL3NhbmRib3gvY2tlZGl0b3Itd3MvbW9kdWxlcy9lZGl0b3Ivc3JjL2NvbnRleHRzL0VkaXRvci50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihFZGl0b3JTdWJzY3JpYmVyLCAiRWRpdG9yU3Vic2NyaWJlciIsICIvVXNlcnMvcmVkZ2UvUHJvamVjdHMvc2FuZGJveC9ja2VkaXRvci13cy9tb2R1bGVzL2VkaXRvci9zcmMvY29udGV4dHMvRWRpdG9yLnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKHVzZUVkaXRvciwgInVzZUVkaXRvciIsICIvVXNlcnMvcmVkZ2UvUHJvamVjdHMvc2FuZGJveC9ja2VkaXRvci13cy9tb2R1bGVzL2VkaXRvci9zcmMvY29udGV4dHMvRWRpdG9yLnRzeCIpOwogIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKGNvbW1hbmRzLCAiY29tbWFuZHMiLCAiL1VzZXJzL3JlZGdlL1Byb2plY3RzL3NhbmRib3gvY2tlZGl0b3Itd3MvbW9kdWxlcy9lZGl0b3Ivc3JjL2NvbnRleHRzL0VkaXRvci50c3giKTsKICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihFZGl0b3JDb250ZXh0LCAiRWRpdG9yQ29udGV4dCIsICIvVXNlcnMvcmVkZ2UvUHJvamVjdHMvc2FuZGJveC9ja2VkaXRvci13cy9tb2R1bGVzL2VkaXRvci9zcmMvY29udGV4dHMvRWRpdG9yLnRzeCIpOwp9KSgpOwoKOwoKKGZ1bmN0aW9uICgpIHsKICB2YXIgbGVhdmVNb2R1bGUgPSAodHlwZW9mIHJlYWN0SG90TG9hZGVyR2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IHJlYWN0SG90TG9hZGVyR2xvYmFsIDogcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpKS5sZWF2ZU1vZHVsZTsKICBsZWF2ZU1vZHVsZSAmJiBsZWF2ZU1vZHVsZShtb2R1bGUpOwp9KSgpOw=="},{"version":3,"sources":["/Users/redge/Projects/sandbox/ckeditor-ws/modules/editor/src/contexts/Editor.tsx"],"names":["React","useState","useContext","createContext","useEffect","EditorProvider","props","currentEditor","setCurrentEditor","enabledCommands","setEnabledCommands","commandHandlers","commands","forEach","command","push","handler","handleCommandChanged","get","on","off","value","executeCommand","options","console","log","execute","editing","view","focus","editor","children","EditorSubscriber","useEditor","context","EditorContext","Error","undefined"],"mappings":"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","sourcesContent":["import React, { useState, ReactNode, useContext, createContext, useEffect } from 'react'\n\nexport function EditorProvider(props: { children?: ReactNode }) {\n    const [currentEditor, setCurrentEditor] = useState<Editor | undefined>()\n    const [enabledCommands, setEnabledCommands] = useState<{ [x: string]: boolean }>({})\n\n    useEffect(() => {\n        const commandHandlers: { command: string; handler(e): void }[] = []\n\n        if (currentEditor) {\n            commands.forEach((command) => {\n                commandHandlers.push({ command, handler: handleCommandChanged })\n                currentEditor.commands.get(command).on('change', handleCommandChanged)\n            })\n        }\n\n        return () => {\n            if (currentEditor) {\n                commandHandlers.forEach(({ command, handler }) =>\n                    currentEditor.commands.get(command).off(handler)\n                )\n            }\n        }\n    }, [currentEditor])\n\n    const handleCommandChanged = () => {\n        const enabledCommands = {}\n        if (currentEditor) {\n            commands.forEach(\n                (command) => (enabledCommands[command] = currentEditor.commands.get(command).value)\n            )\n        }\n\n        setEnabledCommands(enabledCommands)\n    }\n\n    function executeCommand(command: ExecuteCommands, options) {\n        if (!currentEditor) return\n        console.log(command)\n        currentEditor.execute(command, options)\n        currentEditor.editing.view.focus()\n    }\n\n    return (\n        <EditorContext.Provider\n            value={{\n                currentEditor,\n                setCurrentEditor: (editor) => setCurrentEditor(editor),\n                executeCommand,\n                enabledCommands\n            }}>\n            {props.children}\n        </EditorContext.Provider>\n    )\n}\n\nexport function EditorSubscriber(props: EditorSubscriberProps) {\n    const { currentEditor, setCurrentEditor, executeCommand, enabledCommands } = useEditor()\n\n    return props.children({ currentEditor, setCurrentEditor, executeCommand, enabledCommands })\n}\n\nexport function useEditor() {\n    const context = useContext(EditorContext)\n    if (!context) {\n        throw new Error(`useEditor must be used within a EditorProvider`)\n    }\n\n    return context\n}\n\nconst commands: ExecuteCommands[] = [\n    'bold',\n    'italic',\n    'underline',\n    'numberedList',\n    'bulletedList',\n    'alignment',\n    'heading'\n]\n\ntype EditorSubscriberProps = {\n    children(props: InjectedEditorSubscriberProps): JSX.Element | null\n}\n\ntype InjectedEditorSubscriberProps = EditorContextProps\n\ntype EditorContextProps = {\n    currentEditor?: Editor\n    setCurrentEditor(editor?: Editor): void\n    executeCommand(command: ExecuteCommands, options?): void\n    enabledCommands: { [x: string]: boolean }\n}\n\nexport type ExecuteCommands =\n    | 'bold'\n    | 'italic'\n    | 'underline'\n    | 'numberedList'\n    | 'bulletedList'\n    | 'alignment'\n    | 'indent'\n    | 'outdent'\n    | 'heading'\n\nexport type Editor = {\n    execute(command: ExecuteCommands, options?): void\n    editing: { view: { focus(): void } }\n    commands: any\n}\n\nconst EditorContext = createContext<EditorContextProps | undefined>(undefined)\n"]}]}